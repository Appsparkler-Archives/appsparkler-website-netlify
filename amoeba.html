<!DOCTYPE html>
<html>
	<head>
		<title>Amoeba...</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.6.2/tachyons.min.css"  />
		<style>
			.move {
			  cursor: move;
			}
			.ew-resize {
			  cursor: ew-resize;
			}
			.no-touch {
			  pointer-events: none;
			}

			@keyframes pulse {
			  from {
				transform: scale3d(1, 1, 1);
			  }

			  50% {
				transform: scale3d(1.1, 1.1, 1.1);
			  }

			  to {
				transform: scale3d(1, 1, 1);
			  }
			}

			.pulse {
			  animation-name: pulse;
			  transform-origin: center;
			  animation-duration: 2s;
			  animation-iteration-count: infinite;
			  animation-timing-function: ease-in-out;
			}

		</style>
	</head>
	<body>
		<main class="overflow-hidden vh-100 flex items-stretch overflow-hidden">
  <svg class="w-100 h-100" viewBox="0 0 1200 1200" preserveAspectRatio="xMidYMid slice">
    <rect width="100%" height="100%" fill="#080327" />

    <g stroke-width="8" id="js-amoeba">
      <circle id="js-parent-membrane" cx="400" cy="600" r="96"
        fill="#080327" stroke="#3050D5" />

      <path id="js-membrane-connector" d="" fill="#080327" stroke="#3050D5" />

      <circle id="js-child-membrane" class="no-touch" cx="400" cy="600" r="64"
        fill="#080327" stroke="#3050D5" opacity="0" />

      <g class="move">
        <!-- child ectoplasm -->
        <circle id="js-child-ectoplasm" cx="500" cy="600" r="32"
          fill="#080327" stroke="#FFB742" />

        <!-- parent core -->
        <g id="js-parent-core" class="no-touch" opacity="1">
          <circle cx="500" cy="600" r="48"
            fill="#080327" stroke="#FFB742" />
          <circle class="no-touch" cx="500" cy="600" r="12"
            fill="#FF5645" />
        </g>

        <path id="js-ectoplasm-connector" class="no-touch" d="" fill="#080327" stroke="#FFB742" />

        <!-- child nucleus -->
        <circle id="js-child-nucleus" class="no-touch" cx="500" cy="600" r="12"
          fill="#FF5645" />

        <path id="js-nucleus-connector" class="no-touch" d="" fill="#FF5645" />
      </g>

    </g>

  </svg>
</main>
		<script src="https://unpkg.com/@reactivex/rxjs@5.4.3/dist/global/Rx.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
		<script>

;(function () {

  var html = '\n\t\t\t<svg viewBox="0 -8 63.3 55">\n\t\t\t  <title>creative coding club logo</title>\n\t\t\t<g>\n\t\t\t  <path fill="#fff" d="M1093.5,81.7V81.5a1,1,0,0,1,.4-0.7l14.8-9a0.8,0.8,0,0,1,1.2.7v3.7a0.9,0.9,0,0,1-.3.6l-8.1,4.8,8.1,4.6a0.9,0.9,0,0,1,.3.6v3.7a0.8,0.8,0,0,1-1.2.7l-14.8-8.7A1,1,0,0,1,1093.5,81.7Z" transform="translate(-1093.5 -63.9)"></path>\n\t\t\t  <path fill="#fff" d="M1140.4,86.7a0.9,0.9,0,0,1,.3-0.6l8.1-4.6-8.1-4.8a0.9,0.9,0,0,1-.3-0.6V72.5a0.8,0.8,0,0,1,1.2-.7l14.8,9a1,1,0,0,1,.4.7v0.2a1,1,0,0,1-.4.7L1141.6,91a0.8,0.8,0,0,1-1.2-.7V86.7Z" transform="translate(-1093.5 -63.9)"></path>\n\t\t\t</g>\n\t\t\t\t<g class="brush">\n\t\t\t\t<path fill="#fff" d="M1113.5,97c-4.4,1-1.5,5.8-8.3,6.3,2.1,1.3,6.1,1.4,8.2.9s4.6-2.4,4.1-4.8A3.3,3.3,0,0,0,1113.5,97Z" transform="translate(-1093.5 -63.9)"></path>\n\t\t\t\t  <path fill="#fff" d="M1134.8,64.1a0.6,0.6,0,0,1,.7-0.2l1.7,1.2a0.6,0.6,0,0,1,.2.7l-17.6,31.6a0.6,0.6,0,0,1-.7.2L1115,95a0.6,0.6,0,0,1-.2-0.7Z" transform="translate(-1093.5 -63.9)"></path>\n\t\t\t\t</g>\n\t\t\t</svg>\n\n\t\t\t<div class="h1-container">\n\t\t\t\t<h1>\n\t\t\t\t\t<span>C</span>\n\t\t\t\t\t<span>r</span>\n\t\t\t\t\t<span>e</span>\n\t\t\t\t\t<span>a</span>\n\t\t\t\t\t<span>t</span>\n\t\t\t\t\t<span>i</span>\n\t\t\t\t\t<span>v</span>\n\t\t\t\t\t<span>e</span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<span>C</span>\n\t\t\t\t\t<span>o</span>\n\t\t\t\t\t<span>d</span>\n\t\t\t\t\t<span>i</span>\n\t\t\t\t\t<span>n</span>\n\t\t\t\t\t<span>g</span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<span>C</span>\n\t\t\t\t\t<span>l</span>\n\t\t\t\t\t<span>u</span>\n\t\t\t\t\t<span>b</span>\t\n\t\t\t\t</h1>\n\t\t\t</div>';

  var css = '<style>\n\t\t\t@import url("https://fonts.googleapis.com/css?family=Catamaran:900");\n\t\t\t.ccc-box {\n\t\t\t  z-index: 10000;\n\t\t\t  background-color: #032C3F;\n\t\t\t  width: 46px;\n\t\t\t  height: 46px;\n\t\t\t  border-radius: 6px;\n\t\t\t  position: fixed;\n\t\t\t  bottom: 10px;\n\t\t\t  left: 10px;\n\t\t\t  display: block;\n\t\t\t  overflow: hidden;\n\t\t\t  transition: width 0.3s cubic-bezier(0.77, 0, 0.175, 1), height 0.3s cubic-bezier(0.77, 0, 0.175, 1);\n\t\t\t}\n\t\t\t.ccc-box svg {\n\t\t\t  width: 30px !important;\n\t\t\theight: auto !important;\n\t\t\t  position: absolute !important;\n\t\t\t  bottom: 10px;\n\t\t\t  left: 8px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container {\n\t\t\t  display: block;\n\t\t\t  width: 280px;\n\t\t\t  height: 240px;\n\t\t\t  position: absolute;\n\t\t\t  bottom: 0;\n\t\t\t  left: 0;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 {\n\t\t\t  font-size: 1em;\n\t\t\t  display: block;\n\t\t\t  position: absolute;\n\t\t\t  font-family: \'Catamaran\', sans-serif;\n\t\t\t  font-size: 50px;\n\t\t\t  text-align: left;\n\t\t\t  letter-spacing: -8px;\n\t\t\t  line-height: 40px;\n\t\t\t  margin: 55px 0 0 26px;\n\t\t\t  text-decoration: none;\n\t\t\t  text-transform: uppercase;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span {\n\t\t\t  mix-blend-mode: screen;\n\t\t\t  position: relative;\n\t\t\t  opacity: 0;\n\t\t\t  transition: opacity 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), top 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), left 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:first-of-type,\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(11) {\n\t\t\t  color: rgba(2, 166, 209, 0.8);\n\t\t\t  transition-delay: 0.4s;\n\t\t\t  top: 10px;\n\t\t\t  left: 10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(2),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(13),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(18) {\n\t\t\t  color: rgba(239, 71, 111, 0.8);\n\t\t\t  transition-delay: 0.15s;\n\t\t\t  top: -10px;\n\t\t\t  left: 10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(3),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(17) {\n\t\t\t  color: rgba(255, 209, 102, 0.8);\n\t\t\t  transition-delay: 0.2s;\n\t\t\t  top: -10px;\n\t\t\t  left: -10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(4),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(14),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(16) {\n\t\t\t  color: rgba(6, 214, 160, 0.8);\n\t\t\t  transition-delay: 0.5s;\n\t\t\t  top: 10px;\n\t\t\t  left: -10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(5),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(9) {\n\t\t\t  color: rgba(172, 78, 221, 0.8);\n\t\t\t  transition-delay: 0.12s;\n\t\t\t  top: -8px;\n\t\t\t  left: 0px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(6),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(12) {\n\t\t\t  color: rgba(187, 228, 255, 0.8);\n\t\t\t  transition-delay: 0.3s;\n\t\t\t  top: 5px;\n\t\t\t  left: -5px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(7),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(10) {\n\t\t\t  color: rgba(255, 140, 62, 0.8);\n\t\t\t  transition-delay: 0.23s;\n\t\t\t  top: -10px;\n\t\t\t  left: 10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(8),\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(15) {\n\t\t\t  color: rgba(5, 116, 206, 0.8);\n\t\t\t  transition-delay: 0.37s;\n\t\t\t  top: -10px;\n\t\t\t  left: -10px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(9) {\n\t\t\t  padding-left: 60px;\n\t\t\t}\n\t\t\t.ccc-box .h1-container h1 span:nth-of-type(15) {\n\t\t\t  padding-left: 40px;\n\t\t\t}\n\t\t\t.ccc-box:focus {\n\t\t\t  outline: thin dotted;\n\t\t\t}\n\t\t\t.ccc-box:active, .ccc-box:hover {\n\t\t\t  outline: 0;\n\t\t\t  width: 280px;\n\t\t\t  height: 240px;\n\t\t\t  box-shadow: 10px 10px 144px -32px rgba(0, 0, 0, 0.69);\n\t\t\t}\n\t\t\t.ccc-box:active h1 span, .ccc-box:hover h1 span {\n\t\t\t  opacity: 1;\n\t\t\t  left: 0 !important;\n\t\t\t  top: 0 !important;\n\t\t\t}\n\n\t\t</style>';

  document.head.insertAdjacentHTML('beforeend', css);

  var a = document.createElement('a');
  a.setAttribute('href', 'http://creativecoding.club/');
  a.setAttribute('target', '_blank');
  a.setAttribute('class', 'ccc-box');
  a.innerHTML = html;

  document.body.appendChild(a);
})();;
// Dom Nodes
var amoeba = {
  parent: {
    membrane: document.querySelector('#js-parent-membrane'),
    core: document.querySelector('#js-parent-core'),
    ectoplasm: document.querySelectorAll('#js-parent-core > circle')[0],
    nucleus: document.querySelectorAll('#js-parent-core > circle')[1]
  },
  child: {
    ectoplasm: document.querySelector('#js-child-ectoplasm'),
    membrane: document.querySelector('#js-child-membrane'),
    nucleus: document.querySelector('#js-child-nucleus')
  },
  membraneConnector: document.querySelector('#js-membrane-connector'),
  ectoplasmConnector: document.querySelector('#js-ectoplasm-connector'),
  nucleusConnector: document.querySelector('#js-nucleus-connector')
};
var VIEWBOX_SIZE = { W: 1200, H: 1200 };
var SIZES = {
  PARENT_MEMBRANE: 96,
  CHILD_MEMBRANE: 64,
  PARENT_ECTO: 48,
  CHILD_ECTO: 32,
  NUCLEUS: 12
};

var animationFrame$ = Rx.Observable.interval(0, Rx.Scheduler.animationFrame);

/**
 * Create an observable stream to handle drag gesture
 */
var drag = function drag(_ref) {
  var element = _ref.element;
  var pan$ = _ref.pan$;
  var onStart = _ref.onStart;
  var onEnd = _ref.onEnd;

  var panStart$ = pan$.filter(function (e) {
    return e.type === 'panstart';
  });
  var panMove$ = pan$.filter(function (e) {
    return e.type === 'panmove';
  });
  var panEnd$ = pan$.filter(function (e) {
    return e.type === 'panend';
  });

  return panStart$.switchMap(function () {
    var _getStartInfo = getStartInfo(element);

    var start = _getStartInfo.start;
    var w = _getStartInfo.w;
    var h = _getStartInfo.h;

    return panMove$.map(scaleToCanvas({ start: start, w: w, h: h })).takeUntil(panEnd$);
  });
};

/**
 * Generate the drag handler for a DOM element
 */
function handleDrag(element) {
  var hammerPan = new Hammer(element, {
    direction: Hammer.DIRECTION_ALL
  });

  hammerPan.get('pan').set({ direction: Hammer.DIRECTION_ALL });
  var pan$ = Rx.Observable.fromEvent(hammerPan, 'panstart panmove panend');

  var drag$ = drag({
    element: element,
    pan$: pan$
  });

  return animationFrame$.withLatestFrom(drag$, function (_, p) {
    return p;
  });
}

/**
 * Amoeba drag location as an observable
 */
var amoebaDrag$ = handleDrag(amoeba.child.ectoplasm);

// Derive lerped location from amoebaDrag$
var dragWithLerp = function dragWithLerp() {
  var lerpiness = arguments.length <= 0 || arguments[0] === undefined ? 0.05 : arguments[0];
  var start = arguments.length <= 1 || arguments[1] === undefined ? [400, 600] : arguments[1];
  return amoebaDrag$.scan(lerp(lerpiness)).map(function (p) {
    return [p.x, p.y];
  }).startWith(start);
};

/**
 * Movement and mitosis logic
 */
var mitosis$ = new Rx.Subject();

// Move individual parts based on drag$
var membrane$ = dragWithLerp(0.03).do(function (loc) {
  moveTo(loc, amoeba.parent.membrane);
  moveTo(loc, amoeba.parent.ectoplasm);
  moveTo(loc, amoeba.parent.nucleus);
}).takeUntil(mitosis$).share();
var nucleus$ = dragWithLerp(0.075).do(function (loc) {
  return moveTo(loc, amoeba.child.nucleus);
}).share();
var core$ = dragWithLerp(0.07).do(function (loc) {
  moveTo(loc, amoeba.child.membrane);
  moveTo(loc, amoeba.child.ectoplasm);
}).share();

/**
 * Various metaball style connectors
 */
var membraneConnector$ = Rx.Observable.combineLatest(membrane$, core$, function (membraneLoc, coreLoc) {
  return metaball(SIZES.PARENT_MEMBRANE, SIZES.CHILD_MEMBRANE, membraneLoc, coreLoc, function () {
    mitosis$.next(true);
  });
}).share().do(function (path) {
  amoeba.membraneConnector.setAttribute('d', path);
}).takeUntil(mitosis$).do(null, null, function () {
  amoeba.membraneConnector.setAttribute('d', '');
  amoeba.child.membrane.setAttribute('opacity', 1);
  amoeba.parent.core.setAttribute('opacity', 1);
});

var ectoplasmConnector$ = Rx.Observable.combineLatest(membrane$, core$, function (membraneLoc, coreLoc) {
  return metaball(SIZES.PARENT_ECTO, SIZES.CHILD_ECTO, membraneLoc, coreLoc);
}).share().do(function (path) {
  amoeba.ectoplasmConnector.setAttribute('d', path);
}).takeUntil(mitosis$).do(null, null, function () {
  amoeba.ectoplasmConnector.setAttribute('d', '');
});

var nucleusConnector$ = Rx.Observable.combineLatest(membrane$, nucleus$, function (membraneLoc, nucleusLoc) {
  return metaball(SIZES.NUCLEUS, SIZES.NUCLEUS, membraneLoc, nucleusLoc);
}).share().do(function (path) {
  amoeba.nucleusConnector.setAttribute('d', path);
}).takeUntil(mitosis$).do(null, null, function () {
  amoeba.nucleusConnector.setAttribute('d', '');
});

Rx.Observable.merge(membrane$, nucleus$, core$, membraneConnector$, ectoplasmConnector$, nucleusConnector$).subscribe(function () {});

/**
 * Based on Metaball script by SATO Hiroyuki
 * http://park12.wakwak.com/~shp/lc/et/en_aics_script.html
 */
function metaball(radius1, radius2, center1, center2) {
  var onMitosis = arguments.length <= 4 || arguments[4] === undefined ? function () {} : arguments[4];
  var handleLenRate = arguments.length <= 5 || arguments[5] === undefined ? 2.4 : arguments[5];
  var v = arguments.length <= 6 || arguments[6] === undefined ? 0.5 : arguments[6];

  var HALF_PI = Math.PI / 2;
  var d = dist(center1, center2);
  var maxDist = radius1 + radius2 * 2.5;
  var u1 = undefined,
      u2 = undefined;

  if (radius1 === 0 || radius2 === 0) {
    return '';
  }

  if (d > maxDist) {
    onMitosis();
    return '';
  }

  if (d <= Math.abs(radius1 - radius2)) {
    return '';
  } else if (d < radius1 + radius2) {
    u1 = Math.acos((radius1 * radius1 + d * d - radius2 * radius2) / (2 * radius1 * d));
    u2 = Math.acos((radius2 * radius2 + d * d - radius1 * radius1) / (2 * radius2 * d));
  } else {
    u1 = 0;
    u2 = 0;
  }

  // All the angles
  var angle1 = angle(center2, center1);
  var angle2 = Math.acos((radius1 - radius2) / d);
  var angle1a = angle1 + u1 + (angle2 - u1) * v;
  var angle1b = angle1 - u1 - (angle2 - u1) * v;
  var angle2a = angle1 + Math.PI - u2 - (Math.PI - u2 - angle2) * v;
  var angle2b = angle1 - Math.PI + u2 + (Math.PI - u2 - angle2) * v;
  // Points
  var p1a = getVector(center1, angle1a, radius1);
  var p1b = getVector(center1, angle1b, radius1);
  var p2a = getVector(center2, angle2a, radius2);
  var p2b = getVector(center2, angle2b, radius2);

  // Define handle length by the
  // distance between both ends of the curve
  var totalRadius = radius1 + radius2;
  var d2Base = Math.min(v * handleLenRate, dist(p1a, p2a) / totalRadius);

  // Take into account when circles are overlapping
  var d2 = d2Base * Math.min(1, d * 2 / (radius1 + radius2));

  var r1 = radius1 * d2;
  var r2 = radius2 * d2;

  var h1 = getVector(p1a, angle1a - HALF_PI, r1);
  var h2 = getVector(p2a, angle2a + HALF_PI, r2);
  var h3 = getVector(p2b, angle2b - HALF_PI, r2);
  var h4 = getVector(p1b, angle1b + HALF_PI, r1);

  return metaballToPath(p1a, p2a, p1b, p2b, h1, h2, h3, h4, d > radius1, radius2);
}

function metaballToPath(p1a, p2a, p1b, p2b, h1, h2, h3, h4, escaped, r) {
  // prettier-ignore
  return ['M', p1a, 'C', h1, h2, p2a, 'A', r, r, 0, escaped ? 1 : 0, 0, p2b, 'C', h3, h4, p1b].join(' ');
}

/**
 * Utils
 */
function getStartInfo(element) {
  var start = {
    x: +element.getAttribute('cx'),
    y: +element.getAttribute('cy')
  };
  var w = document.body.clientWidth;
  var h = document.body.clientHeight;
  return { start: start, w: w, h: h };
}

function scaleToCanvas(_ref2) {
  var _ref2$start = _ref2.start;
  var x = _ref2$start.x;
  var y = _ref2$start.y;
  var w = _ref2.w;
  var h = _ref2.h;

  var svgW = w > h ? VIEWBOX_SIZE.W : VIEWBOX_SIZE.W * w / h;
  var svgH = w > h ? VIEWBOX_SIZE.H * h / w : VIEWBOX_SIZE.H;

  return function (e) {
    return {
      x: x + mapFromToRange(e.deltaX, 0, w, 0, svgW),
      y: y + mapFromToRange(e.deltaY, 0, h, 0, svgH)
    };
  };
}

function mapFromToRange(x, x1, x2, y1, y2) {
  return (x - x1) * ((y2 - y1) / (x2 - x1)) + y1;
}

function moveTo(_ref3, element) {
  var x = _ref3[0];
  var y = _ref3[1];

  element.setAttribute('cx', x);
  element.setAttribute('cy', y);
}

function dist(_ref4, _ref5) {
  var x1 = _ref4[0];
  var y1 = _ref4[1];
  var x2 = _ref5[0];
  var y2 = _ref5[1];

  return Math.pow(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2), 0.5);
}

function angle(_ref6, _ref7) {
  var x1 = _ref6[0];
  var y1 = _ref6[1];
  var x2 = _ref7[0];
  var y2 = _ref7[1];

  return Math.atan2(y1 - y2, x1 - x2);
}

function getVector(_ref8, a, r) {
  var cx = _ref8[0];
  var cy = _ref8[1];

  return [cx + r * Math.cos(a), cy + r * Math.sin(a)];
}

/**
 * Lerp
 * based on @davidkpiano's RXCSS
 */
function lerp(rate) {
  return function (_ref9, targetValue) {
    var x = _ref9.x;
    var y = _ref9.y;

    var mapValue = function mapValue(value, tValue) {
      var delta = (tValue - value) * rate;
      return value + delta;
    };

    return {
      x: mapValue(x, targetValue.x),
      y: mapValue(y, targetValue.y)
    };
  };
}
		</script>
	</body>
</html>